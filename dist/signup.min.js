window.addEventListener("load",()=>{const a=document.getElementById("email-form");a&&a.addEventListener("submit",async b=>{b.preventDefault(),b.stopImmediatePropagation();const c={name:"",password:"",c_password:""},d=a.querySelector(`input[name="Name"]`);d&&(c.name=d.value.trim());const e=a.querySelector(`input[name="Password"]`);e&&(c.password=e.value);const f=a.querySelector(`input[name="Password-2"]`);f&&(c.c_password=f.value);try{if(c.password&&c.password===c.c_password){const{name:a,password:b}=c,d=await fetch(`${baseUrl}/api/auth/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,password:b}),credentials:"include"}),e=await d.json();if(e.status)localStorage.setItem("__user_data",JSON.stringify(e.data));else throw new Error(e.msg)}else throw new Error("Passwords don't match!")}catch(a){console.error(a),alert(a.message)}})});