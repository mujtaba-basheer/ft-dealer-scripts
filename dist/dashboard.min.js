window.addEventListener("load",async()=>{try{const a=await fetch(`${baseUrl}/api/inventory/submissions`,{credentials:"include"}),b=await a.json();if(!b.status)throw new Error(b.msg);const{data:{trailers:c,records:d,categories:e}}=b,f=document.querySelector(".dashboard-panel"),g=f.querySelectorAll(".category-row, .category-column");g.forEach(a=>a.remove());const h=document.querySelector(".panel-title-flex h1");h.textContent=`Dealer Inventory â€“ Past ${d.length} Months`;{const a=document.createElement("div");a.className="category-row";{const b=document.createElement("div");b.className="main-col model";{const a=document.createElement("div");a.className="main-col-text",a.textContent="Fontaine Model",b.appendChild(a)}const c=document.createElement("div");c.className="main-col suspension-configuration";{const a=document.createElement("div");a.className="main-col-text",a.textContent="Model Name",c.appendChild(a)}a.appendChild(b),a.appendChild(c);for(const b of d){const c=document.createElement("div");c.className="main-col month";{const a=document.createElement("div");a.className="main-col-text",a.textContent=b.date,c.appendChild(a)}a.appendChild(c)}}f.appendChild(a);let b=0;const g=["#fdeaea","#e3ffd2","#dbe5ff","#fbe1ff","#fff3db"];let h=0;for(const a of e){const e=document.createElement("div");e.className="category-column",e.style.backgroundColor=g[h++],h===g.length&&(h=0);{const f=document.createElement("div");f.className="category-sub-column max-146";{const b=document.createElement("div");b.className="main-col-text black",b.textContent=a,f.appendChild(b)}const g=document.createElement("div");g.className="column-horizontal-set";for(let e=b;e<c.length;e++){const e=c[b];if(e.category===a){const a=document.createElement("div");a.className="column-flex-set";{const c=document.createElement("div");c.className="configuration-col rev";{const a=document.createElement("div");a.className="configuration-text",a.textContent=e.name,c.appendChild(a)}a.appendChild(c);for(const c of d){const d=document.createElement("div");d.className="month-col";{const a=document.createElement("div");a.className="configuration-text",a.textContent=c.data[b]+"",d.appendChild(a)}a.appendChild(d)}}g.appendChild(a),b++}else break}e.appendChild(f),e.appendChild(g)}f.appendChild(e)}}{const a=document.querySelector(".export-btn");if(a){const b=a.getAttribute("href");if("#"===b){const b=await fetch(`${baseUrl}/api/inventory/submissions-csv`,{credentials:"include"}),c=await b.blob(),d=URL.createObjectURL(c);a.href=d;const e=new Date;a.download=`${e.valueOf()}.csv`}}}}catch(a){console.error(a)}});